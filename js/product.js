// Sample Product Data 
const productsData = [
    {
        id: 1,
        name: "Mazimal",
        category: "Medicine",
        image: "images/maze.jpg",
        price: "25 EGP",
         
    },
    {
        id: 2,
        name: "Dolipran",
        category: "Medicine",
        image: "images/333.jpg",
        price: "40 EGP",
         
    },
    {
        id: 3,
        name: "Cool-Strike",
        category: "Medicine",
        image: "images/cool.png",
        price: "80 EGP",
         
    },
    {
        id: 4,
        name: "Diabenor",
        category: "Medicine",
        image: "images/diabe.jpg",
        price: "40 EGP",
         
    },
    {
        id: 5,
        name: "B-cor",
        category: "Medicine",
        image: "images/1.jpg",
        price: "11 EGP",
         
    },
    {
        id: 6,
        name: "Cataflam",
        category: "Medicine",
        image: "images/7.jpeg",
        price: "62 EGP",
         
        
    },
    {
        id: 7,
        name: "Nuzartan",
        category: "Medicine",
        image: "images/4.jpg",
        price: "45 EGP",
         
    },
    {
        id: 8,
        name: "Diltiazem",
        category: "Medicine",
        image: "images/3.jpg",
        price: "27 EGP",
         
    },
    {
        id: 9,
        name: "Catafast",
        category: "Medicine",
        image: "images/8.jpg",
        price: "51 EGP",
         
    },
    {
        id: 10,
        name: "Aspirin",
        category: "Medicine",
        image: "images/asp.jpg",
        price: "20 EGP",
         
    },
    {
        id: 11,
        name: "Detronin",
        category: "Medicine",
        image: "images/det.jpg",
        price: "10 EGP",
         
    },
    {
        id: 12,
        name: "Epiphenicol",
        category: "Medicine",
        image: "images/epip.jpeg",
        price: "25 EGP",
         
    },
    {
        id: 13,
        name: "Euthyrox",
        category: "Medicine",
        image: "images/euth.jpg",
        price: "30 EGP",
         
    },
    {
        id: 14,
        name: "Ibuprosol",
        category: "Medicine",
        image: "images/ibu.jpg",
        price: "35 EGP",
         
    },
    {
        id: 15,
        name: "Janaglip",
        category: "Medicine",
        image: "images/jana.jpg",
        price: "40 EGP",
         
    },
    {
        id: 16,
        name: "Kefadim",
        category: "Medicine",
        image: "images/kefa.jpg",
        price: "50 EGP",
         
    },
    {
        id: 17,
        name: "Repaglinide",
        category: "Medicine",
        image: "images/repa.jpg",
        price: "55 EGP",
         
    },
    {
        id: 18,
        name: "Panadol Joint",
        category: "Medicine",
        image: "images/pan2.jpg",
        price: "45 EGP",
         
    },
    {
        id: 19,
        name: "Panadol Advance",
        category: "Medicine",
        image: "images/ban.jpg",
        price: "44 EGP",
         
    },
    {
        id: 20,
        name: "vaxato",
        category: "Medicine",
        image: "images/vaxa.jpg",
        price: "33 EGP",
         
    },
    {
        id: 21,
        name: "Panadol Extra",
        category: "Medicine",
        image: "images/1.png",
        price: "37 EGP",
         
    },

    {
        id: 22,
        name: "Maybelline",
        category: "Make up",
        image: "images/88.jpg",
        price: "278 EGP",
         
    },
    {
        id: 23,
        name: "Foundation",
        category: "Make up",
        image: "images/cc.jpg",
        price: "344 EGP",
         
    },
    {
        id: 24,
        name: "Rare Beauty",
        category: "Make up",
        image: "images/d.jpg",
        price: "1500 EGP",
         
    },
    {
        id: 25,
        name: "Amanda",
        category: "Make up",
        image: "images/amanda.jpg",
        price: "200 EGP",
         
    },
    {
        id: 26,
        name: "SheGlam",
        category: "Make up",
        image: "images/blusher.jpg",
        price: "300 EGP",
         
    },
    {
        id: 27,
        name: "Note",
        category: "Make up",
        image: "images/blush.jpg",
        price: "350 EGP",
         
    },
    {
        id: 28,
        name: "Consealer",
        category: "Make up",
        image: "images/cc.jpg",
        price: "222 EGP",
         
    },
    {
        id: 29,
        name: "SheGlam Consealer",
        category: "Make up",
        image: "images/cons.jpg",
        price: "333 EGP",
         
    },
    {
        id: 30,
        name: "Contor",
        category: "Make up",
        image: "images/contor.jpg",
        price: "250 EGP",
         
    },
    {
        id: 31,
        name: "Lip Linear",
        category: "Make up",
        image: "images/liner.jpg",
        price: "150 EGP",
         
    },
    {
        id: 32,
        name: " Lip Linear Kit",
        category: "Make up",
        image: "images/liner1.jpg",
        price: "230 EGP",
         
    },
    {
        id: 33,
        name: "Lip Gloss",
        category: "Make up",
        image: "images/lip.jpg",
        price: "255 EGP",
         
    },
    {
        id: 34,
        name: "Lipstick",
        category: "Make up",
        image: "images/lip1.jpg",
        price: "280 EGP",
         
    },
    {
        id: 35,
        name: "Max Factor",
        category: "Make up",
        image: "images/max factor.jpg",
        price: "500 EGP",
         
    },
    {
        id: 36,
        name: "HighLighter",
        category: "Make up",
        image: "images/mitecinam.jpg",
        price: "370 EGP",
         
    },
    {
        id: 37,
        name: "Powder",
        category: "Make up",
        image: "images/powder.jpg",
        price: "444 EGP",
         
    },
    {
        id: 40,
        name: "Essence",
        category: "Make up",
        image: "images/powder1.jpg",
        price: "302 EGP",
         
    },
    {
        id: 41,
        name: "Primer",
        category: "Make up",
        image: "images/primer.jpg",
        price: "210 EGP",
         
    },
    {
        id: 42,
        name: "Primer",
        category: "Make up",
        image: "images/primer.jpg",
        price: "220 EGP",
         
    },

{
        id: 43,
        name: "La Roche Posay",
        category: "Skincare Product",
        image: "images/p.jpg",
        price: "600 EGP",
         
    },
    {
        id: 44,
        name: "Clean&Clear",
        category: "Skincare Product",
        image: "images/11.png",
        price: "200 EGP",
         
    },
    {
        id: 45,
        name: "Vichy",
        category: "Skincare Product",
        image: "images/33.png",
        price: "700 EGP",
         
    },
    {
        id: 46,
        name: "Vasline",
        category: "Skincare Product",
        image: "images/vas1.jpg",
        price: "800 EGP",
         
    },
    {
        id: 47,
        name: "Vasline Lip ",
        category: "Skincare Product",
        image: "images/vas2.jpg",
        price: "250 EGP",
         
    },
    {
        id: 48,
        name: "Vichy",
        category: "Skincare Product",
        image: "images/vas2.jpg",
        price: "888 EGP",
         
    },
    {
        id: 49,
        name: "Vichy",
        category: "Skincare Product",
        image: "images/vas2.jpg",
        price: "14 EGP",
         
    },
    {
        id: 50,
        name: "Vichy",
        category: "Skincare Product",
        image: "images/vas2.jpg",
        price: "14 EGP",
         
    },
    {
        id: 51,
        name: "Vichy",
        category: "Skincare Product",
        image: "images/vas2.jpg",
        price: "14 EGP",
         
    },
    {
        id: 52,
        name: "Vichy",
        category: "Skincare Product",
        image: "images/vas2.jpg",
        price: "14 EGP",
         
    },
    {
        id: 53,
        name: "Vichy",
        category: "Skincare Product",
        image: "images/vas2.jpg",
        price: "14 EGP",
         
    },

    {
        id: 54,
        name: "North For Men",
        category: "Men Product",
        image: "images/6.jpeg",
        price: "300 EGP",
         
    },
    {
        id: 55,
        name: "Marbele",
        category: "Men Product",
        image: "images/9.jpeg",
        price: "400 EGP",
         
    },
    {
        id: 56,
        name: "Hair Remover",
        category: "Men Product",
        image: "images/101.jpg",
        price: "450 EGP",
         
    },
    {
        id: 57,
        name: "Hair Remover",
        category: "Men Product",
        image: "images/max.jpg",
        price: "600 EGP",
         
    },
    {
        id: 58,
        name: "Hair Remover",
        category: "Men Product",
        image: "images/lord.jpg",
        price: "700 EGP",
         
    },
    {
        id: 59,
        name: "Hair Remover",
        category: "Men Product",
        image: "images/jillet.jpg",
        price: "350 EGP",
         
    },
    {
        id: 60,
        name: "Hair Remover",
        category: "Men Product",
        image: "images/gillet1.jpg",
        price: "400 EGP",
         
    },
    {
        id: 61,
        name: "Hair Remover",
        category: "Men Product",
        image: "images/color.jpg",
        price: "555 EGP",
         
    },
    {
        id: 62,
        name: "Hair Remover",
        category: "Men Product",
        image: "images/color.jpg",
        price: "111 EGP",
         
    },


    {
        id: 63,
        name: "Shampoo",
        category: "Hair Product",
        image: "images/55.png",
        price: "150 EGP",
         
    },
    {
        id: 64,
        name: "Bless",
        category: "Hair Product",
        image: "images/555.jpg",
        price: "120 EGP",
         
    },
    {
        id: 65,
        name: "Clary",
        category: "Hair Product",
        image: "images/b.jpg",
        price: "299 EGP",
         
    },
    {
        id: 66,
        name: "Dermomde",
        category: "Hair Product",
        image: "images/derm1.jpg",
        price: "70 EGP",
         
    },
    {
        id: 67,
        name: "Dermomde",
        category: "Hair Product",
        image: "images/hairdo.jpeg",
        price: "200 EGP",
         
    },
    {
        id: 68,
        name: "Dermomde",
        category: "Hair Product",
        image: "images/hairdo.jpeg",
        price: "250 EGP",
         
    },
    {
        id: 69,
        name: "Dermomde",
        category: "Hair Product",
        image: "images/hairdo.jpeg",
        price: "400 EGP",
         
    },
    {
        id: 70,
        name: "Dermomde",
        category: "Hair Product",
        image: "images/hairdo.jpeg",
        price: "210 EGP",
         
    },
    {
        id: 71,
        name: "Dermomde",
        category: "Hair Product",
        image: "images/hairdo.jpeg",
        price: "340 EGP",
         
    },


    {
        id: 72,
        name: "Sanosan",
        category: "Baby Essentials",
        image: "images/77.png",
        price: "425 EGP",
         
    },
    {
        id: 73,
        name: "Gohnsons",
        category: "Baby Essentials",
        image: "images/5.jpg",
        price: "69 EGP",
         
    },
    {
        id: 74,
        name: "Sudocream",
        category: "Baby Essentials",
        image: "images/88.png",
        price: "380 EGP",
    },
    {
        id: 75,
        name: "Gohnsons Baby jelly",
        category: "Baby Essentials",
        image: "images/bab.jpg",
        price: "105 EGP", 
    },
    {
        id: 76,
        name: "Baby Cream",
        category: "Baby Essentials",
        image: "images/dr.jpg",
        price: "218 EGP",  
    },
    {
        id: 77,
        name: "Eva Baby Oil",
        category: "Baby Essentials",
        image: "images/baby.jpg",
        price: "74 EGP",
    },
    {
        id: 78,
        name: "Fine",
        category: "Baby Essentials",
        image: "images/fine.jpg",
        price: "428 EGP",
         
    },
    {
        id: 79,
        name: "I Care",
        category: "Baby Essentials",
        image: "images/icare1.jpg",
        price: "48 EGP",
         
    },
    {
        id: 80,
        name: "Super Kides",
        category: "Baby Essentials",
        image: "images/kids.jpeg",
        price: "79 EGP",
         
    },
    {
        id: 81,
        name: "MamaEarth",
        category: "Baby Essentials",
        image: "images/mama.jpg",
        price: "219 EGP",
         
    },
    {
        id: 82,
        name: "Nunu Babay cologne",
        category: "Baby Essentials",
        image: "images/nono.jpeg",
        price: "56 EGP",
         
    },
    {
        id: 83,
        name: "Nunu Babay Shampo",
        category: "Baby Essentials",
        image: "images/no sh.jpeg",
        price: "210 EGP",
         
    },
    {
        id: 84,
        name: "Penduline",
        category: "Baby Essentials",
        image: "images/pend.jpeg",
        price: "81 EGP",
         
    },
    {
        id: 85,
        name: "Sanosan",
        category: "Baby Essentials",
        image: "images/senso.jpg",
        price: "633 EGP",
         
    },
    {
        id: 86,
        name: "Gohnsons Lotion",
        category: "Baby Essentials",
        image: "images/lotion.jpeg",
        price: "49 EGP",
         
    },
    {
        id: 87,
        name: "Gohnsons lotion2",
        category: "Baby Essentials",
        image: "images/shampo.jpg",
        price: "50 EGP",
         
    },
    {
        id: 88,
        name: "Vatika Baby Oil",
        category: "Baby Essentials",
        image: "images/vatika1.jpg",
        price: "32 EGP",
         
    },
    {
        id: 89,
        name: "Tola Kids",
        category: "Baby Essentials",
        image: "images/tola1.jpg",
        price: "118 EGP",
         
    },
    {
        id: 90,
        name: "Toffee Kids",
        category: "Baby Essentials",
        image: "images/toffee.jpg",
        price: "77 EGP",
         
    },

  
];
// Function to update cart count

function updateCartCount() {
const storedCart = JSON.parse(localStorage.getItem("cart")) || [];
const cartCount = storedCart.length;
document.querySelector("#cartItems").innerText = cartCount;
}
document.addEventListener("DOMContentLoaded", function() {
updateCartCount();
renderProducts(productsData);
setupSearch();
});

let cart = JSON.parse(localStorage.getItem("cart")) || [];
// let addproduct = document.querySelector("#addproduct");
// Function to render products
function renderProducts(products) {
const productsContainer = document.getElementById("products");
productsContainer.innerHTML = "";
products.forEach(product => {
const productCard = `
<div class="product" data-id="${product.id}" data-name="${product.name}" data-image="${product.image}" data-description="${product.description}" data-price="${product.price}">
    <a href="" target="_blank"><img src="${product.image}" alt="${product.name}"></a>
    <h3>${product.name}</h3>
    <p class="price">${product.price}</p>
    <button class="add-to-cart">Add to Cart</button>
</div>`;
productsContainer.innerHTML += productCard;
});

// Add event listener to "Add to Cart" buttons
const addToCartButtons = document.querySelectorAll(".add-to-cart");
addToCartButtons.forEach(button => {
button.addEventListener("click", () => {
    const productId = parseInt(button.parentNode.getAttribute("data-id"));
    const selectedProduct = productsData.find(product => product.id === productId);
    if (selectedProduct) {
        button.textContent = "Added"; // Change button text to "Added"
        // addproduct.innerHTML=localStorage.getItem("cart")
        button.classList.add("added"); // Add 'added' class for styling
        button.disabled = true; // Disable button after adding to cart
        addToCart(selectedProduct); // Add selected product to cart
        updateCartUI(); // Update UI to show product as added
        saveCartToLocalStorage(); // Save updated cart to local storage
        updateCartCount(); 
        updateCartUI();
         }
    });
      });
   }
function addToCart(product) {
cart.push(product); // Add product to cart array
updateCartCount();
}


// Load cart from localStorage when the page loads
window.addEventListener('DOMContentLoaded', () => {
loadCartFromLocalStorage();
updateCartUI();
});


// Function to load cart from localStorage
function loadCartFromLocalStorage() {
const storedCart = localStorage.getItem("cart");
if (storedCart) {
cart = JSON.parse(storedCart);
}
}

// Function to update UI based on the items in the cart
function updateCartUI() {
const addToCartButtons = document.querySelectorAll(".add-to-cart");
addToCartButtons.forEach(button => {
const productId = parseInt(button.parentNode.getAttribute("data-id"));
const inCart = cart.some(product => product.id === productId);
if (inCart) {
    button.textContent = "Added";
    button.classList.add("added");
    button.disabled = true;
}
}); 
}
function saveCartToLocalStorage() {
localStorage.setItem("cart", JSON.stringify(cart)); // Save cart to local storage
}
console.log(localStorage.getItem('cart'))

renderProducts(productsData);

const categoryItems = document.querySelectorAll("#product-categories li");
categoryItems.forEach(item => {
item.addEventListener("click", () => {
categoryItems.forEach(el => el.classList.remove("active"));
item.classList.add("active");
const category = item.getAttribute("data-filter");
const filteredProducts = category === "all" ? productsData : productsData.filter(product => product.category === category);
renderProducts(filteredProducts);
});
});

function setupSearch() {
    const searchInput = document.getElementById("searchInput");
    searchInput.addEventListener("input", function() {
        const searchTerm = searchInput.value.trim().toLowerCase();
        const currentCategory = document.querySelector("#product-categories li.active").getAttribute("data-filter");
        let filteredProducts;

        // Check if search term has at least three characters before filtering
        if (searchTerm.length >= 3) {
            if (currentCategory === "all") {
                filteredProducts = productsData.filter(product => product.name.toLowerCase().includes(searchTerm));
            } else {
                filteredProducts = productsData.filter(product => product.name.toLowerCase().includes(searchTerm) && product.category === currentCategory);
            }

            if (filteredProducts.length > 0) {
                renderProducts(filteredProducts);
            } else {
                renderSoldOutMessage();
            }
        } else {
            // If search term is less than three characters, do not perform search
            renderProducts(productsData); // Render all products
        }
    });
}

function renderSoldOutMessage() {
    const productsContainer = document.getElementById("products");
    productsContainer.innerHTML = "<p>Sold Out</p>";
}




